<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>hello phaser!</title>
        <!--<script src="entities.js"></script>-->
        <script src="phaser-master/build/phaser.min.js"></script>
        <script src="/eureca.js"></script>
        <script src="boot.js"></script>
        <script src="preloader.js"></script>
        <script src="menu.js"></script>
        <script src="game.js"></script>
        <script src="characters.js"></script>
        <style>
        body {
            margin:0;
            background:#111;
        }
        </style>
    </head>
    <body>
    <script type="text/javascript">
    //main code
    window.onload = function()
    {
        var game = new Phaser.Game(1280, 800, Phaser.AUTO, '');
        //  Add the States your game has.
        //  You don't have to do this in the html, it could be done in your Boot state too, but for simplicity I'll keep it here.
        game.network = {
            client : false,
            server : false,
            ready: false,
            onComplete : function() {},
            setup : function() {
                console.log("Setting up...");

                var client = new Eureca.Client();
                game.network.client = client;

                game.network.client.ready(function(proxy) {
                    game.network.server = proxy;
                    console.log("Got Proxy.");
                });

                client.exports.setId = function(id) {
                    console.log("Setting id");
                    console.log(game.network);
                    game.network.server.handshake();
                    game.network.ready = true;
                }
                return this;
            }
        };
        console.log(game.network);
        game.state.add('Boot', BasicGame.Boot);
        game.state.add('Preloader', BasicGame.Preloader);
        game.state.add('MainMenu', BasicGame.MainMenu);
        game.state.add('Game', BasicGame.Game);
        //  Now start the Boot state.
        game.state.start('Boot');

        // var game = new Game();
        // var net = new Network();

        // net.setup(startGame);

        // var startGame = function() {
        //     phaser = new Phaser.Game(1280, 800, Phaser.AUTO, '', {
        //         preload: game.preload, 
        //         create: game.create, 
        //         update: game.update, 
        //         render: game.render
        //     });   
        // }
    }
    </script>

    </body>
</html>
