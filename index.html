<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>hello phaser!</title>
        <script src="phaser-master/build/phaser.js"></script>
    </head>
    <body>
    <script type="text/javascript">

    window.onload = function() 
    {

        var game = new Phaser.Game(1280, 800, Phaser.AUTO, '', {preload: preload, create: create, update: update, render: render});   

        function preload () {
            game.load.spritesheet('girl', 'img/girl.png')
            game.load.spritesheet('ghost', 'img/ghost.png');
            game.load.spritesheet('bg', 'img/holdbg.png');
        }
        //GLOBAL VARIABLES
        var ghost, girl;
        var bg;
        var cursors, wasd, jumpButton;
        var ghostSpeed = 250;
        var girlSpeed = 200;
        var jumpTimer = 0;



        function create () {

            bg = game.add.sprite(game.world.x = 0,game.world.y =(800-195), 'bg');
            game.physics.enable(bg, Phaser.Physics.ARCADE);
            bg.fixedToCamera = true;
            bg.body.checkCollision.up = true;
            bg.enableBody = true;




            ghost = game.add.sprite(game.world.centerX, game.world.centerY, 'ghost');
            game.physics.enable(ghost, Phaser.Physics.ARCADE);
            game.physics.enable.acceleration = 200;
            ghost.allowGravity = false;
            ghost.collideWorldBounds = true;
            
            game.stage.backgroundColor='#00FF00';


            
            //Girl Initialization
            girl = game.add.sprite(game.world.x = 50,game.world.centerY, 'girl');
            
            game.physics.enable(girl, Phaser.Physics.ARCADE);
            game.physics.arcade.collide(girl, bg);
            girl.body.collideWorldBounds = true;
            girl.body.checkCollision.up = true;
            girl.body.checkCollision.down = true;
            girl.body.checkCollision.left= true;
            girl.body.checkCollision.right = true;
            game.camera.follow(girl);


            //button references
            cursors = game.input.keyboard.createCursorKeys();
            jumpButton = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);
            wasd = {
                up: game.input.keyboard.addKey(Phaser.Keyboard.W),
                down: game.input.keyboard.addKey(Phaser.Keyboard.S),
                left: game.input.keyboard.addKey(Phaser.Keyboard.A),
                right: game.input.keyboard.addKey(Phaser.Keyboard.D)
            };

            game.physics.arcade.gravity.y =100;
        }

        function render(){

        }

        function update()
        {
            ghost.body.velocity.x = 0;
            ghost.body.velocity.y = 0;

            game.physics.arcade.collide(bg, girl);

            if(cursors.left.isDown){
                ghost.body.velocity.x = -ghostSpeed;
            }
            if(cursors.right.isDown){
                ghost.body.velocity.x = ghostSpeed;
            }
            if(cursors.up.isDown){
                ghost.body.velocity.y = -ghostSpeed;
            }
            if(cursors.down.isDown){
                ghost.body.velocity.y = ghostSpeed;
            }


            girl.body.velocity.x = 0;
            girl.body.velocity.y = 0;
            if(wasd.left.isDown){
                girl.body.velocity.x = -girlSpeed;
            }
            if(wasd.right.isDown){
                girl.body.velocity.x = girlSpeed;
            }
            if(wasd.down.isDown){
                girl.body.velocity.y = +girlSpeed;
            }
            if (jumpButton.isDown && girl.body.onFloor() && game.time.now > jumpTimer)
            {
                girl.body.velocity.y = -20;
                jumpTimer = game.time.now + 750;
            }

        }

    };

    </script>

    </body>
</html>